{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _cssClasses = require('../cssClasses');\n\nvar _cssClasses2 = _interopRequireDefault(_cssClasses);\n\nvar _dimensions = require('../dimensions');\n\nvar _CSSTranslate = require('../CSSTranslate');\n\nvar _CSSTranslate2 = _interopRequireDefault(_CSSTranslate);\n\nvar _reactEasySwipe = require('react-easy-swipe');\n\nvar _reactEasySwipe2 = _interopRequireDefault(_reactEasySwipe);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar Thumbs = function (_Component) {\n  _inherits(Thumbs, _Component);\n\n  function Thumbs(props) {\n    _classCallCheck(this, Thumbs);\n\n    var _this = _possibleConstructorReturn(this, (Thumbs.__proto__ || Object.getPrototypeOf(Thumbs)).call(this, props));\n\n    _initialiseProps.call(_this);\n\n    _this.state = {\n      selectedItem: props.selectedItem,\n      hasMount: false,\n      firstItem: 0,\n      itemSize: null,\n      visibleItems: 0,\n      lastPosition: 0,\n      showArrows: false,\n      images: _this.getImages()\n    };\n    return _this;\n  }\n\n  _createClass(Thumbs, [{\n    key: 'componentDidMount',\n    value: function componentDidMount(nextProps) {\n      this.setupThumbs();\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(props, state) {\n      if (props.selectedItem !== this.state.selectedItem) {\n        this.setState({\n          selectedItem: props.selectedItem,\n          firstItem: this.getFirstItem(props.selectedItem)\n        });\n      }\n\n      if (props.children !== this.props.children) {\n        this.setState({\n          images: this.getImages()\n        });\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.children === prevProps.children) {\n        return;\n      } // This will capture any size changes for arrow adjustments etc.\n      // usually in the same render cycle so we don't see any flickers\n\n\n      this.updateSizes();\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.destroyThumbs();\n    }\n  }, {\n    key: 'setupThumbs',\n    value: function setupThumbs() {\n      // as the widths are calculated, we need to resize\n      // the carousel when the window is resized\n      window.addEventListener(\"resize\", this.updateSizes); // issue #2 - image loading smaller\n\n      window.addEventListener(\"DOMContentLoaded\", this.updateSizes); // when the component is rendered we need to calculate\n      // the container size to adjust the responsive behaviour\n\n      this.updateSizes();\n    }\n  }, {\n    key: 'destroyThumbs',\n    value: function destroyThumbs() {\n      // removing listeners\n      window.removeEventListener(\"resize\", this.updateSizes);\n      window.removeEventListener(\"DOMContentLoaded\", this.updateSizes);\n    }\n  }, {\n    key: 'getImages',\n    value: function getImages() {\n      var images = _react.Children.map(this.props.children, function (item, index) {\n        var img = item; // if the item is not an image, try to find the first image in the item's children.\n\n        if (item.type !== \"img\") {\n          img = _react.Children.toArray(item.props.children).filter(function (children) {\n            return children.type === \"img\";\n          })[0];\n        }\n\n        if (!img || img.length === 0) {\n          return null;\n        }\n\n        return img;\n      });\n\n      if (images.filter(function (image) {\n        return image !== null;\n      }).length === 0) {\n        console.warn('No images found! Can\\'t build the thumb list without images. If you don\\'t need thumbs, set showThumbs={false} in the Carousel. Note that it\\'s not possible to get images rendered inside custom components. More info at https://github.com/leandrowd/react-responsive-carousel/blob/master/TROUBLESHOOTING.md');\n        return null;\n      }\n\n      return images;\n    }\n  }, {\n    key: 'getFirstItem',\n    value: function getFirstItem(selectedItem) {\n      var firstItem = selectedItem;\n\n      if (selectedItem >= this.state.lastPosition) {\n        firstItem = this.state.lastPosition;\n      }\n\n      if (selectedItem < this.state.firstItem + this.state.visibleItems) {\n        firstItem = this.state.firstItem;\n      }\n\n      if (selectedItem < this.state.firstItem) {\n        firstItem = selectedItem;\n      }\n\n      return firstItem;\n    }\n  }, {\n    key: 'renderItems',\n    value: function renderItems() {\n      var _this2 = this;\n\n      return this.state.images.map(function (img, index) {\n        var itemClass = _cssClasses2.default.ITEM(false, index === _this2.state.selectedItem && _this2.state.hasMount);\n\n        var thumbProps = {\n          key: index,\n          ref: function ref(e) {\n            return _this2.setThumbsRef(e, index);\n          },\n          className: itemClass,\n          onClick: _this2.handleClickItem.bind(_this2, index, _this2.props.children[index]),\n          onKeyDown: _this2.handleClickItem.bind(_this2, index, _this2.props.children[index])\n        };\n\n        if (index === 0) {\n          img = _react2.default.cloneElement(img, {\n            onLoad: _this2.setMountState\n          });\n        }\n\n        return _react2.default.createElement('li', _extends({}, thumbProps, {\n          role: 'button',\n          tabIndex: 0\n        }), img);\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      if (!this.props.children) {\n        return null;\n      } // show left arrow?\n\n\n      var hasPrev = this.state.showArrows && this.state.firstItem > 0; // show right arrow\n\n      var hasNext = this.state.showArrows && this.state.firstItem < this.state.lastPosition; // obj to hold the transformations and styles\n\n      var itemListStyles = {};\n      var currentPosition = -this.state.firstItem * this.state.itemSize + 'px';\n      var transformProp = (0, _CSSTranslate2.default)(currentPosition, this.props.axis);\n      var transitionTime = this.props.transitionTime + 'ms';\n      itemListStyles = {\n        'WebkitTransform': transformProp,\n        'MozTransform': transformProp,\n        'MsTransform': transformProp,\n        'OTransform': transformProp,\n        'transform': transformProp,\n        'msTransform': transformProp,\n        'WebkitTransitionDuration': transitionTime,\n        'MozTransitionDuration': transitionTime,\n        'MsTransitionDuration': transitionTime,\n        'OTransitionDuration': transitionTime,\n        'transitionDuration': transitionTime,\n        'msTransitionDuration': transitionTime\n      };\n      return _react2.default.createElement('div', {\n        className: _cssClasses2.default.CAROUSEL(false)\n      }, _react2.default.createElement('div', {\n        className: _cssClasses2.default.WRAPPER(false),\n        ref: this.setItemsWrapperRef\n      }, _react2.default.createElement('button', {\n        type: 'button',\n        className: _cssClasses2.default.ARROW_PREV(!hasPrev),\n        onClick: this.slideRight\n      }), _react2.default.createElement(_reactEasySwipe2.default, {\n        tagName: 'ul',\n        selectedItem: this.state.selectedItem,\n        className: _cssClasses2.default.SLIDER(false, this.state.swiping),\n        onSwipeLeft: this.slideLeft,\n        onSwipeRight: this.slideRight,\n        onSwipeMove: this.onSwipeMove,\n        onSwipeStart: this.onSwipeStart,\n        onSwipeEnd: this.onSwipeEnd,\n        style: itemListStyles,\n        ref: this.setItemsListRef\n      }, this.renderItems()), _react2.default.createElement('button', {\n        type: 'button',\n        className: _cssClasses2.default.ARROW_NEXT(!hasNext),\n        onClick: this.slideLeft\n      })));\n    }\n  }]);\n\n  return Thumbs;\n}(_react.Component);\n\nThumbs.displayName = 'Thumbs';\nThumbs.propsTypes = {\n  children: _propTypes2.default.element.isRequired,\n  transitionTime: _propTypes2.default.number,\n  selectedItem: _propTypes2.default.number,\n  thumbWidth: _propTypes2.default.number\n};\nThumbs.defaultProps = {\n  selectedItem: 0,\n  transitionTime: 350,\n  axis: 'horizontal'\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this3 = this;\n\n  this.setItemsWrapperRef = function (node) {\n    _this3.itemsWrapperRef = node;\n  };\n\n  this.setItemsListRef = function (node) {\n    _this3.itemsListRef = node;\n  };\n\n  this.setThumbsRef = function (node, index) {\n    if (!_this3.thumbsRef) {\n      _this3.thumbsRef = [];\n    }\n\n    _this3.thumbsRef[index] = node;\n  };\n\n  this.updateSizes = function () {\n    if (!_this3.props.children || !_this3.itemsWrapperRef) {\n      return;\n    }\n\n    var total = _this3.props.children.length;\n    var wrapperSize = _this3.itemsWrapperRef.clientWidth;\n    var itemSize = _this3.props.thumbWidth ? _this3.props.thumbWidth : (0, _dimensions.outerWidth)(_this3.thumbsRef[0]);\n    var visibleItems = Math.floor(wrapperSize / itemSize);\n    var lastPosition = total - visibleItems;\n    var showArrows = visibleItems < total;\n\n    _this3.setState(function (_state, props) {\n      return {\n        itemSize: itemSize,\n        visibleItems: visibleItems,\n        firstItem: showArrows ? _this3.getFirstItem(props.selectedItem) : 0,\n        lastPosition: lastPosition,\n        showArrows: showArrows\n      };\n    });\n  };\n\n  this.setMountState = function () {\n    _this3.setState({\n      hasMount: true\n    });\n\n    _this3.updateSizes();\n  };\n\n  this.handleClickItem = function (index, item, e) {\n    if (!e.keyCode || e.key === 'Enter') {\n      var handler = _this3.props.onSelectItem;\n\n      if (typeof handler === 'function') {\n        handler(index, item);\n      }\n    }\n  };\n\n  this.onSwipeStart = function () {\n    _this3.setState({\n      swiping: true\n    });\n  };\n\n  this.onSwipeEnd = function () {\n    _this3.setState({\n      swiping: false\n    });\n  };\n\n  this.onSwipeMove = function (deltaX) {\n    var leftBoundary = 0;\n    var currentPosition = -_this3.state.firstItem * _this3.state.itemSize;\n    var lastLeftBoundary = -_this3.state.visibleItems * _this3.state.itemSize; // prevent user from swiping left out of boundaries\n\n    if (currentPosition === leftBoundary && deltaX > 0) {\n      deltaX = 0;\n    } // prevent user from swiping right out of boundaries\n\n\n    if (currentPosition === lastLeftBoundary && deltaX < 0) {\n      deltaX = 0;\n    }\n\n    var wrapperSize = _this3.itemsWrapperRef.clientWidth;\n    var position = currentPosition + 100 / (wrapperSize / deltaX) + '%'; // if 3d isn't available we will use left to move\n\n    if (_this3.itemsListRef) {\n      ['WebkitTransform', 'MozTransform', 'MsTransform', 'OTransform', 'transform', 'msTransform'].forEach(function (prop) {\n        _this3.itemsListRef.style[prop] = (0, _CSSTranslate2.default)(position, _this3.props.axis);\n      });\n    }\n  };\n\n  this.slideRight = function (positions) {\n    _this3.moveTo(_this3.state.firstItem - (typeof positions === 'number' ? positions : 1));\n  };\n\n  this.slideLeft = function (positions) {\n    _this3.moveTo(_this3.state.firstItem + (typeof positions === 'number' ? positions : 1));\n  };\n\n  this.moveTo = function (position) {\n    // position can't be lower than 0\n    position = position < 0 ? 0 : position; // position can't be higher than last postion\n\n    position = position >= _this3.lastPosition ? _this3.lastPosition : position;\n\n    _this3.setState({\n      firstItem: position,\n      // if it's not a slider, we don't need to set position here\n      selectedItem: _this3.state.selectedItem\n    });\n  };\n};\n\nexports.default = Thumbs;","map":{"version":3,"sources":["/Users/olasubomiawokoya/Documents/projects/ChopChowClient/node_modules/react-responsive-carousel/lib/components/Thumbs.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","require","_react2","_interopRequireDefault","_propTypes","_propTypes2","_cssClasses","_cssClasses2","_dimensions","_CSSTranslate","_CSSTranslate2","_reactEasySwipe","_reactEasySwipe2","obj","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","Thumbs","_Component","_this","getPrototypeOf","_initialiseProps","state","selectedItem","hasMount","firstItem","itemSize","visibleItems","lastPosition","showArrows","images","getImages","componentDidMount","nextProps","setupThumbs","componentWillReceiveProps","setState","getFirstItem","children","componentDidUpdate","prevProps","updateSizes","componentWillUnmount","destroyThumbs","window","addEventListener","removeEventListener","Children","map","item","index","img","type","toArray","filter","image","console","warn","renderItems","_this2","itemClass","ITEM","thumbProps","ref","e","setThumbsRef","className","onClick","handleClickItem","bind","onKeyDown","cloneElement","onLoad","setMountState","createElement","role","tabIndex","render","hasPrev","hasNext","itemListStyles","currentPosition","transformProp","axis","transitionTime","CAROUSEL","WRAPPER","setItemsWrapperRef","ARROW_PREV","slideRight","tagName","SLIDER","swiping","onSwipeLeft","slideLeft","onSwipeRight","onSwipeMove","onSwipeStart","onSwipeEnd","style","setItemsListRef","ARROW_NEXT","Component","displayName","propsTypes","element","isRequired","number","thumbWidth","defaultProps","_this3","node","itemsWrapperRef","itemsListRef","thumbsRef","total","wrapperSize","clientWidth","outerWidth","Math","floor","_state","keyCode","handler","onSelectItem","deltaX","leftBoundary","lastLeftBoundary","position","forEach","prop","positions","moveTo"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _cssClasses = require('../cssClasses');\n\nvar _cssClasses2 = _interopRequireDefault(_cssClasses);\n\nvar _dimensions = require('../dimensions');\n\nvar _CSSTranslate = require('../CSSTranslate');\n\nvar _CSSTranslate2 = _interopRequireDefault(_CSSTranslate);\n\nvar _reactEasySwipe = require('react-easy-swipe');\n\nvar _reactEasySwipe2 = _interopRequireDefault(_reactEasySwipe);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Thumbs = function (_Component) {\n    _inherits(Thumbs, _Component);\n\n    function Thumbs(props) {\n        _classCallCheck(this, Thumbs);\n\n        var _this = _possibleConstructorReturn(this, (Thumbs.__proto__ || Object.getPrototypeOf(Thumbs)).call(this, props));\n\n        _initialiseProps.call(_this);\n\n        _this.state = {\n            selectedItem: props.selectedItem,\n            hasMount: false,\n            firstItem: 0,\n            itemSize: null,\n            visibleItems: 0,\n            lastPosition: 0,\n            showArrows: false,\n            images: _this.getImages()\n        };\n        return _this;\n    }\n\n    _createClass(Thumbs, [{\n        key: 'componentDidMount',\n        value: function componentDidMount(nextProps) {\n            this.setupThumbs();\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(props, state) {\n            if (props.selectedItem !== this.state.selectedItem) {\n                this.setState({\n                    selectedItem: props.selectedItem,\n                    firstItem: this.getFirstItem(props.selectedItem)\n                });\n            }\n            if (props.children !== this.props.children) {\n                this.setState({\n                    images: this.getImages()\n                });\n            }\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            if (this.props.children === prevProps.children) {\n                return;\n            }\n\n            // This will capture any size changes for arrow adjustments etc.\n            // usually in the same render cycle so we don't see any flickers\n            this.updateSizes();\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this.destroyThumbs();\n        }\n    }, {\n        key: 'setupThumbs',\n        value: function setupThumbs() {\n            // as the widths are calculated, we need to resize\n            // the carousel when the window is resized\n            window.addEventListener(\"resize\", this.updateSizes);\n            // issue #2 - image loading smaller\n            window.addEventListener(\"DOMContentLoaded\", this.updateSizes);\n\n            // when the component is rendered we need to calculate\n            // the container size to adjust the responsive behaviour\n            this.updateSizes();\n        }\n    }, {\n        key: 'destroyThumbs',\n        value: function destroyThumbs() {\n            // removing listeners\n            window.removeEventListener(\"resize\", this.updateSizes);\n            window.removeEventListener(\"DOMContentLoaded\", this.updateSizes);\n        }\n    }, {\n        key: 'getImages',\n        value: function getImages() {\n            var images = _react.Children.map(this.props.children, function (item, index) {\n                var img = item;\n\n                // if the item is not an image, try to find the first image in the item's children.\n                if (item.type !== \"img\") {\n                    img = _react.Children.toArray(item.props.children).filter(function (children) {\n                        return children.type === \"img\";\n                    })[0];\n                }\n\n                if (!img || img.length === 0) {\n                    return null;\n                }\n\n                return img;\n            });\n\n            if (images.filter(function (image) {\n                return image !== null;\n            }).length === 0) {\n                console.warn('No images found! Can\\'t build the thumb list without images. If you don\\'t need thumbs, set showThumbs={false} in the Carousel. Note that it\\'s not possible to get images rendered inside custom components. More info at https://github.com/leandrowd/react-responsive-carousel/blob/master/TROUBLESHOOTING.md');\n\n                return null;\n            }\n\n            return images;\n        }\n    }, {\n        key: 'getFirstItem',\n        value: function getFirstItem(selectedItem) {\n            var firstItem = selectedItem;\n\n            if (selectedItem >= this.state.lastPosition) {\n                firstItem = this.state.lastPosition;\n            }\n\n            if (selectedItem < this.state.firstItem + this.state.visibleItems) {\n                firstItem = this.state.firstItem;\n            }\n\n            if (selectedItem < this.state.firstItem) {\n                firstItem = selectedItem;\n            }\n\n            return firstItem;\n        }\n    }, {\n        key: 'renderItems',\n        value: function renderItems() {\n            var _this2 = this;\n\n            return this.state.images.map(function (img, index) {\n                var itemClass = _cssClasses2.default.ITEM(false, index === _this2.state.selectedItem && _this2.state.hasMount);\n\n                var thumbProps = {\n                    key: index,\n                    ref: function ref(e) {\n                        return _this2.setThumbsRef(e, index);\n                    },\n                    className: itemClass,\n                    onClick: _this2.handleClickItem.bind(_this2, index, _this2.props.children[index]),\n                    onKeyDown: _this2.handleClickItem.bind(_this2, index, _this2.props.children[index])\n                };\n\n                if (index === 0) {\n                    img = _react2.default.cloneElement(img, {\n                        onLoad: _this2.setMountState\n                    });\n                }\n\n                return _react2.default.createElement(\n                    'li',\n                    _extends({}, thumbProps, { role: 'button', tabIndex: 0 }),\n                    img\n                );\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            if (!this.props.children) {\n                return null;\n            }\n\n            // show left arrow?\n            var hasPrev = this.state.showArrows && this.state.firstItem > 0;\n            // show right arrow\n            var hasNext = this.state.showArrows && this.state.firstItem < this.state.lastPosition;\n            // obj to hold the transformations and styles\n            var itemListStyles = {};\n\n            var currentPosition = -this.state.firstItem * this.state.itemSize + 'px';\n\n            var transformProp = (0, _CSSTranslate2.default)(currentPosition, this.props.axis);\n\n            var transitionTime = this.props.transitionTime + 'ms';\n\n            itemListStyles = {\n                'WebkitTransform': transformProp,\n                'MozTransform': transformProp,\n                'MsTransform': transformProp,\n                'OTransform': transformProp,\n                'transform': transformProp,\n                'msTransform': transformProp,\n                'WebkitTransitionDuration': transitionTime,\n                'MozTransitionDuration': transitionTime,\n                'MsTransitionDuration': transitionTime,\n                'OTransitionDuration': transitionTime,\n                'transitionDuration': transitionTime,\n                'msTransitionDuration': transitionTime\n            };\n\n            return _react2.default.createElement(\n                'div',\n                { className: _cssClasses2.default.CAROUSEL(false) },\n                _react2.default.createElement(\n                    'div',\n                    { className: _cssClasses2.default.WRAPPER(false), ref: this.setItemsWrapperRef },\n                    _react2.default.createElement('button', { type: 'button', className: _cssClasses2.default.ARROW_PREV(!hasPrev), onClick: this.slideRight }),\n                    _react2.default.createElement(\n                        _reactEasySwipe2.default,\n                        { tagName: 'ul',\n                            selectedItem: this.state.selectedItem,\n                            className: _cssClasses2.default.SLIDER(false, this.state.swiping),\n                            onSwipeLeft: this.slideLeft,\n                            onSwipeRight: this.slideRight,\n                            onSwipeMove: this.onSwipeMove,\n                            onSwipeStart: this.onSwipeStart,\n                            onSwipeEnd: this.onSwipeEnd,\n                            style: itemListStyles,\n                            ref: this.setItemsListRef },\n                        this.renderItems()\n                    ),\n                    _react2.default.createElement('button', { type: 'button', className: _cssClasses2.default.ARROW_NEXT(!hasNext), onClick: this.slideLeft })\n                )\n            );\n        }\n    }]);\n\n    return Thumbs;\n}(_react.Component);\n\nThumbs.displayName = 'Thumbs';\nThumbs.propsTypes = {\n    children: _propTypes2.default.element.isRequired,\n    transitionTime: _propTypes2.default.number,\n    selectedItem: _propTypes2.default.number,\n    thumbWidth: _propTypes2.default.number\n};\nThumbs.defaultProps = {\n    selectedItem: 0,\n    transitionTime: 350,\n    axis: 'horizontal'\n};\n\nvar _initialiseProps = function _initialiseProps() {\n    var _this3 = this;\n\n    this.setItemsWrapperRef = function (node) {\n        _this3.itemsWrapperRef = node;\n    };\n\n    this.setItemsListRef = function (node) {\n        _this3.itemsListRef = node;\n    };\n\n    this.setThumbsRef = function (node, index) {\n        if (!_this3.thumbsRef) {\n            _this3.thumbsRef = [];\n        }\n        _this3.thumbsRef[index] = node;\n    };\n\n    this.updateSizes = function () {\n        if (!_this3.props.children || !_this3.itemsWrapperRef) {\n            return;\n        }\n\n        var total = _this3.props.children.length;\n        var wrapperSize = _this3.itemsWrapperRef.clientWidth;\n        var itemSize = _this3.props.thumbWidth ? _this3.props.thumbWidth : (0, _dimensions.outerWidth)(_this3.thumbsRef[0]);\n        var visibleItems = Math.floor(wrapperSize / itemSize);\n        var lastPosition = total - visibleItems;\n        var showArrows = visibleItems < total;\n        _this3.setState(function (_state, props) {\n            return {\n                itemSize: itemSize,\n                visibleItems: visibleItems,\n                firstItem: showArrows ? _this3.getFirstItem(props.selectedItem) : 0,\n                lastPosition: lastPosition,\n                showArrows: showArrows\n            };\n        });\n    };\n\n    this.setMountState = function () {\n        _this3.setState({ hasMount: true });\n        _this3.updateSizes();\n    };\n\n    this.handleClickItem = function (index, item, e) {\n        if (!e.keyCode || e.key === 'Enter') {\n            var handler = _this3.props.onSelectItem;\n\n            if (typeof handler === 'function') {\n                handler(index, item);\n            }\n        }\n    };\n\n    this.onSwipeStart = function () {\n        _this3.setState({\n            swiping: true\n        });\n    };\n\n    this.onSwipeEnd = function () {\n        _this3.setState({\n            swiping: false\n        });\n    };\n\n    this.onSwipeMove = function (deltaX) {\n        var leftBoundary = 0;\n\n        var currentPosition = -_this3.state.firstItem * _this3.state.itemSize;\n        var lastLeftBoundary = -_this3.state.visibleItems * _this3.state.itemSize;\n\n        // prevent user from swiping left out of boundaries\n        if (currentPosition === leftBoundary && deltaX > 0) {\n            deltaX = 0;\n        }\n\n        // prevent user from swiping right out of boundaries\n        if (currentPosition === lastLeftBoundary && deltaX < 0) {\n            deltaX = 0;\n        }\n\n        var wrapperSize = _this3.itemsWrapperRef.clientWidth;\n        var position = currentPosition + 100 / (wrapperSize / deltaX) + '%';\n\n        // if 3d isn't available we will use left to move\n        if (_this3.itemsListRef) {\n            ['WebkitTransform', 'MozTransform', 'MsTransform', 'OTransform', 'transform', 'msTransform'].forEach(function (prop) {\n                _this3.itemsListRef.style[prop] = (0, _CSSTranslate2.default)(position, _this3.props.axis);\n            });\n        }\n    };\n\n    this.slideRight = function (positions) {\n        _this3.moveTo(_this3.state.firstItem - (typeof positions === 'number' ? positions : 1));\n    };\n\n    this.slideLeft = function (positions) {\n        _this3.moveTo(_this3.state.firstItem + (typeof positions === 'number' ? positions : 1));\n    };\n\n    this.moveTo = function (position) {\n        // position can't be lower than 0\n        position = position < 0 ? 0 : position;\n        // position can't be higher than last postion\n        position = position >= _this3.lastPosition ? _this3.lastPosition : position;\n\n        _this3.setState({\n            firstItem: position,\n            // if it's not a slider, we don't need to set position here\n            selectedItem: _this3.state.selectedItem\n        });\n    };\n};\n\nexports.default = Thumbs;"]},"metadata":{},"sourceType":"script"}