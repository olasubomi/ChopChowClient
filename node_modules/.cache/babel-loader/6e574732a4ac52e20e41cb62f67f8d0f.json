{"ast":null,"code":"import _defineProperty from \"/Users/olasubomiawokoya/Documents/projects/chop_chow_sd/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/olasubomiawokoya/Documents/projects/chop_chow_sd/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/olasubomiawokoya/Documents/projects/chop_chow_sd/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/olasubomiawokoya/Documents/projects/chop_chow_sd/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/olasubomiawokoya/Documents/projects/chop_chow_sd/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/olasubomiawokoya/Documents/projects/chop_chow_sd/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/olasubomiawokoya/Documents/projects/chop_chow_sd/client/src/components/forgotpassword/index.jsx\";\nimport React from 'react';\nimport './style.css';\nimport { Form, Button, Container, Modal, Row, Col, ButtonToolbar } from 'react-bootstrap';\nimport { Link, Redirect } from 'react-router-dom';\nimport { setTimeout } from 'timers';\n\nvar ResetPassword =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ResetPassword, _React$Component);\n\n  function ResetPassword() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ResetPassword);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ResetPassword)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      email: '',\n      username: '',\n      messageErr: false,\n      messageSuccess: false,\n      showModal: true\n    };\n\n    _this.handleChange = function (e) {\n      var name = e.currentTarget.name;\n      var value = e.currentTarget.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.handleClose = function (delay) {\n      setTimeout(function () {\n        _this.props.history.push('/grocery');\n      }, delay || 0);\n    };\n\n    _this.formSubmit = function (e) {\n      e.preventDefault();\n\n      if (_this.state.email || _this.state.username) {\n        _this.submitForm();\n      } else {\n        _this.setState({\n          messageErr: 'Please enter correct data.'\n        });\n      }\n    };\n\n    _this.submitForm = function () {\n      fetch('/api/forgotpass', {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'Content-type': 'application/json'\n        },\n        body: JSON.stringify(_this.state)\n      }).then(function (response) {\n        console.log(response);\n\n        if (response.status === 400 || response.status === 404) {\n          _this.setState({\n            messageErr: 'Bad Request , Your username or email does not exist.'\n          });\n        } else if (response.status === 401) {\n          _this.setState({\n            messageErr: 'you are UnAuthorized'\n          });\n        } else if (response.status >= 500) {\n          _this.setState({\n            messageErr: 'Sorry , Internal Server ERROR'\n          });\n        } else {\n          _this.setState({\n            messageErr: '',\n            isAuthenticated: true,\n            messageSuccess: 'Please check your inbox for more details! '\n          });\n\n          _this.handleClose(5000);\n        }\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(ResetPassword, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Modal, {\n        show: this.state.showModal,\n        onHide: this.handleClose,\n        className: \"modal resetpassword\",\n        backdrop: \"static\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(Modal.Header, {\n        closeButton: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(Modal.Title, {\n        style: {\n          width: '100%',\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, \"Forgot Password\"))), React.createElement(Modal.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(Row, {\n        className: \"justify-content-md-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(Col, {\n        xs: true,\n        lg: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(Form, {\n        className: \"\",\n        onSubmit: this.formSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(Form.Control, {\n        type: \"text\",\n        name: \"email\",\n        value: this.state.email,\n        placeholder: \"Your email\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }), React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, \"Or\")), React.createElement(Form.Group, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(Form.Control, {\n        type: \"text\",\n        name: \"username\",\n        value: this.state.username,\n        placeholder: \"Username\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }), React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      })), React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \"We will sent you a link to reset your password.\"), React.createElement(\"p\", {\n        className: \"msg-success\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, this.state.messageSuccess), React.createElement(\"p\", {\n        className: \"msg-err\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, this.state.messageErr), React.createElement(ButtonToolbar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"secondary\",\n        type: \"submit\",\n        className: \"login__form-btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, \"Reset\"))))))));\n    }\n  }]);\n\n  return ResetPassword;\n}(React.Component);\n\nexport { ResetPassword as default };","map":{"version":3,"sources":["/Users/olasubomiawokoya/Documents/projects/chop_chow_sd/client/src/components/forgotpassword/index.jsx"],"names":["React","Form","Button","Container","Modal","Row","Col","ButtonToolbar","Link","Redirect","setTimeout","ResetPassword","state","email","username","messageErr","messageSuccess","showModal","handleChange","e","name","currentTarget","value","setState","handleClose","delay","props","history","push","formSubmit","preventDefault","submitForm","fetch","method","credentials","headers","body","JSON","stringify","then","response","console","log","status","isAuthenticated","width","textAlign","Component"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,aAAP;AACA,SAASC,IAAT,EAAeC,MAAf,EAAuBC,SAAvB,EAAkCC,KAAlC,EAAyCC,GAAzC,EAA8CC,GAA9C,EAAmDC,aAAnD,QAAwE,iBAAxE;AAEA,SAASC,IAAT,EAAeC,QAAf,QAA+B,kBAA/B;AACA,SAASC,UAAT,QAA2B,QAA3B;;IAEqBC,a;;;;;;;;;;;;;;;;;UACnBC,K,GAAQ;AACNC,MAAAA,KAAK,EAAE,EADD;AAENC,MAAAA,QAAQ,EAAE,EAFJ;AAGNC,MAAAA,UAAU,EAAE,KAHN;AAINC,MAAAA,cAAc,EAAE,KAJV;AAKNC,MAAAA,SAAS,EAAE;AALL,K;;UASRC,Y,GAAe,UAACC,CAAD,EAAO;AACpB,UAAIC,IAAI,GAAGD,CAAC,CAACE,aAAF,CAAgBD,IAA3B;AACA,UAAIE,KAAK,GAAGH,CAAC,CAACE,aAAF,CAAgBC,KAA5B;;AACA,YAAKC,QAAL,qBAAiBH,IAAjB,EAAwBE,KAAxB;AACD,K;;UAGDE,W,GAAc,UAACC,KAAD,EAAW;AACvBf,MAAAA,UAAU,CAAC,YAAM;AACf,cAAKgB,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,UAAxB;AACD,OAFS,EAEPH,KAAK,IAAI,CAFF,CAAV;AAGD,K;;UAEDI,U,GAAa,UAACV,CAAD,EAAO;AAClBA,MAAAA,CAAC,CAACW,cAAF;;AACA,UAAI,MAAKlB,KAAL,CAAWC,KAAX,IAAoB,MAAKD,KAAL,CAAWE,QAAnC,EAA8C;AAC5C,cAAKiB,UAAL;AACD,OAFD,MAEO;AACL,cAAKR,QAAL,CAAc;AAAER,UAAAA,UAAU,EAAE;AAAd,SAAd;AACD;AACF,K;;UAEDgB,U,GAAa,YAAM;AACjBC,MAAAA,KAAK,CAAC,iBAAD,EAAoB;AACvBC,QAAAA,MAAM,EAAE,MADe;AAEvBC,QAAAA,WAAW,EAAE,SAFU;AAGvBC,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT,SAHc;AAMvBC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe,MAAK1B,KAApB;AANiB,OAApB,CAAL,CAOG2B,IAPH,CAOQ,UAAAC,QAAQ,EAAI;AAClBC,QAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;;AACE,YAAIA,QAAQ,CAACG,MAAT,KAAoB,GAApB,IAA2BH,QAAQ,CAACG,MAAT,KAAoB,GAAnD,EAAwD;AACtD,gBAAKpB,QAAL,CAAc;AAAER,YAAAA,UAAU,EAAE;AAAd,WAAd;AACD,SAFD,MAEO,IAAIyB,QAAQ,CAACG,MAAT,KAAoB,GAAxB,EAA6B;AAClC,gBAAKpB,QAAL,CAAc;AAAER,YAAAA,UAAU,EAAE;AAAd,WAAd;AACD,SAFM,MAEA,IAAIyB,QAAQ,CAACG,MAAT,IAAmB,GAAvB,EAA4B;AACjC,gBAAKpB,QAAL,CAAc;AAAER,YAAAA,UAAU,EAAE;AAAd,WAAd;AACD,SAFM,MAEA;AACL,gBAAKQ,QAAL,CAAc;AAAER,YAAAA,UAAU,EAAE,EAAd;AAAkB6B,YAAAA,eAAe,EAAE,IAAnC;AAAyC5B,YAAAA,cAAc,EAAE;AAAzD,WAAd;;AACA,gBAAKQ,WAAL,CAAiB,IAAjB;AACD;AACF,OAnBH;AAoBD,K;;;;;;;6BAEQ;AAET,aACE,oBAAC,KAAD;AAAO,QAAA,IAAI,EAAE,KAAKZ,KAAL,CAAWK,SAAxB;AAAmC,QAAA,MAAM,EAAE,KAAKO,WAAhD;AAA6D,QAAA,SAAS,EAAC,qBAAvE;AAA6F,QAAA,QAAQ,EAAC,QAAtG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,KAAD,CAAO,MAAP;AAAc,QAAA,WAAW,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,KAAD,CAAO,KAAP;AAAa,QAAA,KAAK,EAAE;AAAEqB,UAAAA,KAAK,EAAE,MAAT;AAAiBC,UAAAA,SAAS,EAAE;AAA5B,SAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF,CADF,CADF,EAME,oBAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAK,QAAA,SAAS,EAAC,2BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAK,QAAA,EAAE,MAAP;AAAQ,QAAA,EAAE,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAM,QAAA,SAAS,EAAC,EAAhB;AAAmB,QAAA,QAAQ,EAAE,KAAKjB,UAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,IAAD,CAAM,OAAN;AACM,QAAA,IAAI,EAAC,MADX;AAEM,QAAA,IAAI,EAAC,OAFX;AAGM,QAAA,KAAK,EAAE,KAAKjB,KAAL,CAAWC,KAHxB;AAIM,QAAA,WAAW,EAAC,YAJlB;AAKM,QAAA,QAAQ,EAAE,KAAKK,YALrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAQM,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cARN,CADF,EAaQ,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA,oBAAC,IAAD,CAAM,OAAN;AACI,QAAA,IAAI,EAAC,MADT;AAEI,QAAA,IAAI,EAAC,UAFT;AAGI,QAAA,KAAK,EAAE,KAAKN,KAAL,CAAWE,QAHtB;AAII,QAAA,WAAW,EAAC,UAJhB;AAKI,QAAA,QAAQ,EAAE,KAAKI,YALnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADA,EAQE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QARF,CAbR,EAwBQ,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2DAxBR,EA0BQ;AAAG,QAAA,SAAS,EAAC,aAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA4B,KAAKN,KAAL,CAAWI,cAAvC,CA1BR,EA2BQ;AAAG,QAAA,SAAS,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAwB,KAAKJ,KAAL,CAAWG,UAAnC,CA3BR,EA4BQ,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAC,WAAhB;AAA4B,QAAA,IAAI,EAAC,QAAjC;AAA0C,QAAA,SAAS,EAAC,iBAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,CA5BR,CADF,CADF,CADF,CADF,CANF,CADF;AAkDC;;;;EA3GwCf,KAAK,CAAC+C,S;;SAA5BpC,a","sourcesContent":["import React from 'react';\nimport './style.css';\nimport { Form, Button, Container, Modal, Row, Col, ButtonToolbar } from 'react-bootstrap';\n\nimport { Link, Redirect } from 'react-router-dom';\nimport { setTimeout } from 'timers';\n\nexport default class ResetPassword extends React.Component {\n  state = {\n    email: '',\n    username: '',\n    messageErr: false,\n    messageSuccess: false,\n    showModal: true,\n  };\n\n\n  handleChange = (e) => {\n    let name = e.currentTarget.name;\n    let value = e.currentTarget.value;\n    this.setState({ [name]: value });\n  }\n\n\n  handleClose = (delay) => {\n    setTimeout(() => {\n      this.props.history.push('/grocery');\n    }, delay || 0);\n  };\n\n  formSubmit = (e) => {\n    e.preventDefault();\n    if((this.state.email || this.state.username)) {\n      this.submitForm();\n    } else {\n      this.setState({ messageErr: 'Please enter correct data.' });\n    }\n  };\n\n  submitForm = () => {\n    fetch('/api/forgotpass', {\n      method: 'POST',\n      credentials: 'include',\n      headers: {\n        'Content-type': 'application/json',\n      },\n      body: JSON.stringify(this.state),\n    }).then(response => {\n      console.log(response)\n        if (response.status === 400 || response.status === 404) {\n          this.setState({ messageErr: 'Bad Request , Your username or email does not exist.' });\n        } else if (response.status === 401) {\n          this.setState({ messageErr: 'you are UnAuthorized' });\n        } else if (response.status >= 500) {\n          this.setState({ messageErr: 'Sorry , Internal Server ERROR' })\n        } else {\n          this.setState({ messageErr: '', isAuthenticated: true, messageSuccess: 'Please check your inbox for more details! ' });\n          this.handleClose(5000);\n        }\n      })\n  };\n\n  render() {\n\n  return (\n    <Modal show={this.state.showModal} onHide={this.handleClose} className=\"modal resetpassword\" backdrop=\"static\">\n      <Modal.Header closeButton>\n        <Modal.Title style={{ width: '100%', textAlign: 'center' }}>\n          <div>Forgot Password</div>\n        </Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <Container>\n          <Row className=\"justify-content-md-center\">\n            <Col xs lg>\n              <Form className=\"\" onSubmit={this.formSubmit}>\n                <Form.Group>\n                    <Form.Control\n                          type=\"text\"\n                          name=\"email\"\n                          value={this.state.email}\n                          placeholder=\"Your email\"\n                          onChange={this.handleChange}\n                        />\n                      <Form.Label>Or</Form.Label>\n                    \n                      </Form.Group>\n                      \n                      <Form.Group>\n                      <Form.Control\n                          type=\"text\"\n                          name=\"username\"\n                          value={this.state.username}\n                          placeholder=\"Username\"\n                          onChange={this.handleChange}\n                        />\n                        <Form.Label></Form.Label>\n                        \n                      </Form.Group>\n                      <Form.Label>We will sent you a link to reset your password.</Form.Label>\n\n                      <p className=\"msg-success\">{this.state.messageSuccess}</p>\n                      <p className=\"msg-err\">{this.state.messageErr}</p>\n                      <ButtonToolbar>\n                        <Button variant=\"secondary\" type=\"submit\" className=\"login__form-btn\">Reset</Button>\n                      </ButtonToolbar>\n                      \n                    </Form>\n                  </Col>\n                </Row>\n              </Container>\n            </Modal.Body>\n          </Modal>\n        )\n  }\n\n}\n"]},"metadata":{},"sourceType":"module"}